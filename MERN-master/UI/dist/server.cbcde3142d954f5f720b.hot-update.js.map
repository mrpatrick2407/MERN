{"version":3,"file":"server.cbcde3142d954f5f720b.hot-update.js","mappings":"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","sources":["webpack://por-mern0stack2-api/./src/IssueList.jsx","webpack://por-mern0stack2-api/webpack/runtime/getFullHash"],"sourcesContent":["import IssueFilter from './IssueFilter.jsx';\r\nimport IssueTable from './IssueTable.jsx';\r\nimport URLSearchParams from 'url-search-params';\r\nimport React from 'react';\r\nimport { Route, Switch } from 'react-router-dom';\r\nimport IssueDetails from './IssueDetail.jsx'\r\nimport {graphqlendpoint} from './graphqlendppoint.js'\r\nimport {FormLabel, Nav, NavItem, Navbar} from'react-bootstrap'\r\nimport {Card} from 'react-bootstrap'\r\nimport Toast from './Toast.jsx';\r\nimport IssueAdd from './IssueAdd.jsx';\r\n\r\nimport withToast from './withToast.jsx';\r\n\r\n     class IssueList extends React.Component{\r\n    constructor(){\r\n        super();\r\n        this.state={issues:[]}\r\n        this.createissue=this.createissue.bind(this);\r\n        this.closeIssue=this.closeIssue.bind(this);\r\n        this.deleteissue=this.deleteissue.bind(this);\r\n    }\r\n    componentDidMount(){\r\n        this.loadData()\r\n    }   \r\n    componentDidUpdate(prevProps){\r\n        const {location:{search:prevSearch}}=prevProps;\r\n        const {location:{search}}=this.props;\r\n        if(prevSearch!=search){\r\n            this.loadData()\r\n        }\r\n    }\r\n    \r\n\r\n    async loadData(){\r\n        const {location:{search}}=this.props;\r\n        const params=new URLSearchParams(search);\r\n        const vars={}\r\n        if(params.get('status')){\r\n            vars.status=params.get('status')\r\n        }\r\n        if(params.get('effortmin')){vars.effortmin=parseInt(params.get('effortmin'))}\r\n        if(params.get('effortmax')){vars.effortmax=parseInt(params.get('effortmax'))}\r\n        const query=`query Issues($page: Int, $status: statustype, $effortmin: Int, $effortmax: Int) {\r\n            issueList(page: $page, status: $status, effortmin: $effortmin, effortmax: $effortmax) {\r\n              issuesDb {\r\n                id\r\n                owner\r\n                title\r\n                status\r\n                created\r\n                description\r\n                due\r\n                effort\r\n              }\r\n              pages\r\n            }\r\n          }`;\r\n    \r\nvars.page=1;\r\n    const data =await graphqlendpoint(query,vars,this.props.showerror);\r\n    if(data){\r\n        this.props.showsuccess(\"Issues loaded\")\r\n        this.setState({issues:data.issueList.issuesDb})\r\n    }\r\n    }\r\n\r\n    async closeIssue(index){\r\n        const issues=this.state.issues;\r\n        console.log(index);\r\n        const mutation =`mutation IssueUpdate($id: Int!) {\r\n            issueUpdate(id: $id, Changes: {status:Closed}) {\r\n              id title status owner effort created due description  \r\n              }\r\n            }`;\r\n       const data =await graphqlendpoint(mutation,{id:issues[index].id});\r\n       if(data){\r\n        this.setState((prevState)=>{\r\n            const newState =[...prevState.issues];\r\n            newState[index] = data.issueUpdate;\r\n            return {issues: newState};\r\n        })\r\n       }else{\r\n        \r\n        this.loadData();\r\n\r\n       }\r\n    }\r\n\r\n    async deleteissue(index){\r\n        console.log(\"delete issue\")\r\n        console.log(index);\r\n        const mutation=`mutation IssueDelete($id: Int!) {\r\n            issueDelete(id: $id)\r\n          }`\r\n          const {location:{pathname,search},history}=this.props;\r\n          console.log(pathname+search)\r\n          const {issues}=this.state;\r\n          const {id}=issues[index];\r\n          const data= await graphqlendpoint(mutation,{id});\r\n          if(data){\r\n            this.setState((prevState)=>{\r\n                const newlist=[...prevState.issues];\r\n\r\n                if(pathname==`/issues`){\r\n                    history.push({pathname:`/issues`,search:search})\r\n                }\r\n                newlist.splice(index, 1);\r\n                console.log(newlist)\r\n\r\n                return {issues:newlist};\r\n            });\r\n            \r\n          }\r\n    }\r\n\r\n    async createissue(issue){\r\n        \r\n        const query=`query issueAdd($issue:Issueinput!) {\r\n            issueAdd(issue:$issue) {\r\n            id\r\n            }\r\n        }`;\r\n\r\n        const data =await graphqlendpoint(query,{issue},this.props.showerror);\r\n        if(data){\r\n\r\n            this.props.showsuccess(\"Created successfully\")\r\n            this.loadData();\r\n        }\r\n    }\r\n    \r\n    render(){\r\n        const { match } = this.props;\r\n        \r\n        return (\r\n            <React.Fragment>\r\n                <Navbar bg='light'>\r\n                \r\n                <IssueAdd  createIssue={this.createissue}/>\r\n               \r\n                </Navbar>\r\n                <Card >\r\n                    <Card.Title>Filter</Card.Title>\r\n                    <Card.Body >\r\n                <IssueFilter urlbase=\"/issues\"/>\r\n\r\n                    </Card.Body>\r\n                </Card>\r\n                \r\n                <Card >\r\n                    \r\n                    <Card.Body >\r\n                         <IssueTable deleteissue={this.deleteissue} closeIssue={this.closeIssue}  issues={this.state.issues}/>\r\n\r\n                    </Card.Body>\r\n                </Card>\r\n                         \r\n                <Switch>\r\n              <Route path={`/issues/:id`} component={IssueDetails} />\r\n                </Switch>\r\n            \r\n                \r\n\r\n            </React.Fragment>\r\n        );\r\n    }\r\n}\r\nexport default withToast(IssueList);","__webpack_require__.h = () => (\"2159970451dc81a7876a\")"],"names":["IssueFilter","IssueTable","URLSearchParams","React","Route","Switch","IssueDetails","graphqlendpoint","FormLabel","Nav","NavItem","Navbar","Card","Toast","IssueAdd","withToast","IssueList","Component","constructor","state","issues","createissue","bind","closeIssue","deleteissue","componentDidMount","loadData","componentDidUpdate","prevProps","location","search","prevSearch","props","params","vars","get","status","effortmin","parseInt","effortmax","query","page","data","showerror","showsuccess","setState","issueList","issuesDb","index","console","log","mutation","id","prevState","newState","issueUpdate","pathname","history","newlist","push","splice","issue","render","match","createElement","Fragment","bg","createIssue","Title","Body","urlbase","path","component"],"sourceRoot":""}